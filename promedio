import tkinter as tk
from tkinter import messagebox

alumnos = {}

def agregar_alumno():
    nombre = entry_nombre.get()
    notas = entry_notas.get()

    try:
        lista_notas = list(map(float, notas.split(",")))
    except ValueError:
        messagebox.showerror("Error", "Las calificaciones deben estar separadas por comas y ser numéricas.")
        return

    if not nombre or not lista_notas:
        messagebox.showerror("Error", "Debe ingresar un nombre y al menos una calificación.")
        return

    promedio = sum(lista_notas) / len(lista_notas)
    alumnos[nombre] = {"notas": lista_notas, "promedio": promedio}

    entry_nombre.delete(0, tk.END)
    entry_notas.delete(0, tk.END)
    mostrar_resultados()

def mostrar_resultados():
    texto_resultado.delete("1.0", tk.END)
    ordenados = sorted(alumnos.items(), key=lambda x: x[1]['promedio'], reverse=True)

    for nombre, datos in ordenados:
        texto_resultado.insert(tk.END, f"{nombre} - Notas: {datos['notas']} - Promedio: {datos['promedio']:.2f}\n")

def salir():
    if messagebox.askokcancel("Salir", "¿Seguro que desea salir del programa de registro de calificaciones?"):
        ventana.destroy()

ventana = tk.Tk()
ventana.title("registro de calificaciones")
ventana.config(bg="lightpink")

tk.Label(ventana, text="Nombre del alumno:").grid(row=0, column=0)
entry_nombre = tk.Entry(ventana)
entry_nombre.grid(row=0, column=1)

tk.Label(ventana, text="Calificaciones (separadas por comas):").grid(row=1, column=0)
entry_notas = tk.Entry(ventana)
entry_notas.grid(row=1, column=1)

btn_agregar = tk.Button(ventana, text="registrar alumno", command=agregar_alumno)
btn_agregar.grid(row=2, column=0, pady=5)
btn_agregar.configure(bg="lightblue")
btn_salir = tk.Button(ventana, text="Salir", command=salir)
btn_salir.grid(row=2, column=1, pady=5)

texto_resultado = tk.Text(ventana, height=10, width=50)
texto_resultado.grid(row=3, column=0, columnspan=2, pady=10)

ventana.protocol("WM_DELETE_WINDOW", salir)

ventana.mainloop()
